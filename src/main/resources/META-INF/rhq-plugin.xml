<?xml version="1.0" encoding="UTF-8" ?>
<plugin name="Apache-Kafka-0.8.0-RHQ-Plugin"
        displayName="Apache Kafka 0.8.0 RHQ Plugin"
        description="Apache Kafka 0.8.0 RHQ Plugin"
        version="0.1"
        xsi:noNamespaceSchemaLocation="rhq-plugin.xsd"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="urn:xmlns:rhq-plugin"
        xmlns:c="urn:xmlns:rhq-configuration">

    <depends plugin="JMX" useClasses="true"/>

    <service name="kafka.server:type=BrokerTopicMetrics"
             description="kafka.server:type=BrokerTopicMetrics"
             discovery="org.rhq.plugins.jmx.MBeanResourceDiscoveryComponent"
             class="org.rhq.plugins.jmx.MBeanResourceComponent">

        <runs-inside>
            <parent-resource-type name="JMX Server" plugin="JMX"/>
        </runs-inside>

        <plugin-configuration>
            <c:simple-property name="objectName"
                               default="&quot;kafka.server&quot;:type=&quot;BrokerTopicMetrics&quot;,name=&quot;AllTopicsBytesInPerSec&quot;"/>
            <c:simple-property name="version" type="string" default="0.8.0" description="v0.8.0"/>
        </plugin-configuration>

        <metric property="Count"
                displayName="Count"
                description="Count"
                defaultOn="true"
                dataType="measurement"
                displayType="summary"
                defaultInterval="60000"
                units="none"/>

        <metric property="EventType"
                displayName="EventType"
                description="EventType"
                defaultOn="true"
                dataType="trait"
                displayType="summary"/>

    </service>

    <service name="kafka.log:type=LogFlushStats,name=LogFlushRateAndTimeMs"
             description="kafka.log:type=LogFlushStats,name=LogFlushRateAndTimeMs"
             discovery="org.rhq.plugins.jmx.MBeanResourceDiscoveryComponent"
             class="org.rhq.plugins.jmx.MBeanResourceComponent">

        <runs-inside>
            <parent-resource-type name="JMX Server" plugin="JMX"/>
        </runs-inside>

        <plugin-configuration>
            <c:simple-property name="objectName"
                               default="&quot;kafka.log&quot;:type=&quot;LogFlushStats&quot;,name=&quot;LogFlushRateAndTimeMs&quot;"/>
            <c:simple-property name="version" type="string" default="0.8.0" description="v0.8.0"/>
        </plugin-configuration>

        <metric property="MeanRate"
                displayName="MeanRate"
                description="MeanRate"
                defaultOn="true"
                dataType="measurement"
                displayType="summary"
                defaultInterval="60000"
                units="none"/>

    </service>
</plugin>